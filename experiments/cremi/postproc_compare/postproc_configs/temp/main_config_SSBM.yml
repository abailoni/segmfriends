# In the following, feel free to use the path-placeholders $DATA_HOME and $LOCAL_DRIVE that will be
# redefined as arguments at runtime (allowing better handling of dynamic paths).

# -----------------------------------
#### MAIN EXPERIMENT FOLDER ####
# This path defines the main directory where all the experiments
#  you will run will be saved (including data like scores and output segmentation files)
main_output_dir: "/home/nhuetsch/Desktop/ssbm_experiments/"

# Now let's define the name of the current experiment (a folder with this name will be created in main_output_dir,
# if not existing already):
experiment_name: p1_agglodate
# -----------------------------------


postproc_config:
  # ------------------------------
  # General options
  # ------------------------------
  nb_threads: 6

  # ------------------------------
  # RUNNING MULTIPLE PIPELINES AT THE SAME TIME:
  # ------------------------------
  # In general, the following `segm_pipeline_type` parameter defines which type of pipeline should be run.
  # The available options atm are `GASP`, `spectral`
  # The specific options for each segmentation pipeline are specified at the end of this config file.
  segm_pipeline_type: 'GASP'

  # The main idea is that the default options/parameters defined in this main config file can be overwritten by run-specific
  # options defined in additional config files (exactly as in speedrun, https://github.com/inferno-pytorch/speedrun).
  # First, we define the directory in which these additional config files are found (also with extension .yml):
  postproc_presets_dir_path: '/home/nhuetsch/Desktop/github/segmfriends/experiments/cremi/postproc_compare/postproc_configs/presets'
  # FIXME or change:
  postproc_presets_file_path: '/home/nhuetsch/Desktop/github/segmfriends/experiments/cremi/postproc_compare/postproc_configs/presets/postproc_presets.yml'



  # --- Iterated options ---
  # Use the following iterated options to run multiple pipelines at the same time.
  # From each combination of the options below, a segmentation pipeline will be generated.
  # For example, if we specify three presets ["GASP-Avg", "MWS", "multicut"] (notice that this will require having three
  # configs files with those names defined in the presets folder) and three CREMI samples, in total we will get 9 runs.

  iterated_options:
    preset: ["MEAN", "SUM"] # Presets to be found in the presets folder
    k: [2,3,4]
    eta: [0.1, 0.2, 0.3]

  # How many segmentation pipelines to run at the same time:
  nb_thread_pools: 1

  # We could want to run the same setup multiple times (for example to collect statistics about noise/randomness etc)
  nb_iterations: 10

  # Available options: "SPONGE", "SPONGE-sym", "BNC", "L-sym"
  spectral_method_name: "SPONGE-sym"

  SSBM_kwargs:
    n: 1000 # 100000
    #k: 4 # 100
    gaussian_sigma: 0.1
    eta: 0.1
    pin: 1
    pout: 1
    k: 2



  # ------------------------------
  # Saved outputs options:
  # ------------------------------
  # By default, two types of files are generated by each run:
  #   - one score/config file, that will be stored in the 'scores' sub-folder of the `main_output_dir/experiment_name` folder
  #       with the `.yml` extension
  #   - one output segmentation file, stored in the `out_segms` subfolder with the `.h5` extension.

  # Sometimes, we want to run the same setup/agglomeration multiple times (when there is randomness or noise involved
  # for example, so we collect statistics afterward). In this case, set `overwrite_prev_files` to False and each output
  # file name will contain a randomly assigned ID between 0 and 1000000000:
  overwrite_prev_files: False

  # In order to make the names of the saved files more readable, the name will include some things by default like the
  # segm_pipeline_type, the CREMI sample, and the selected presets.
  # On top of those, you can also manually define a custom "postfix" string to append to the filenames:
  filename_postfix: "myCustomPostfix"


  # ------------------------------
  # SEGMENTATION PIPELINES OPTIONS:
  # Specific options for each segmentation pipeline
  # ------------------------------
  # Generally, these options are rarely modified directly in this main file.
  # For minor "run-specific-adjustments", define instead additional presets/config-files
  # that will overwrite the options defined here (this allows to run multiple pipelines at the same time)
  # ------------------------------

  # Options for the GASP agglomerative pipeline (also includes mutex watershed with possibility to start from superpixels)
  GASP_kwargs:
#    offsets_probabilities: 1.0 # Probs. for long-range edges
#    used_offsets: [0,1,2,3,4,5,6,14,15,16,17] # In case you want to agglomerate ignoring some of the predicted offsets
    verbose: True
    beta_bias: 0.5 # Merge all: 0.0; split all: 1.0

    run_GASP_kwargs:
      print_every: 1000000

  # Options for the multicut pipeline:
  multicut_kwargs:
    weighting_scheme: 'all' # "all", "z", "xyz", None
    solver_type: 'multicutIlpCplex' # fusionMoves, kernighanLin, multicutIlpCplex, ccFusionMoveBased
  #  time_limit: 120
    weight: 16.
    verbose_visitNth: 100
#    offsets_probabilities: 1.0










